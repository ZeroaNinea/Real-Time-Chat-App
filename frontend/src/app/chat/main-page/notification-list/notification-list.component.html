<mat-card class="notification-card">
  <mat-card-title>Notifications</mat-card-title>

  <mat-list>
    @for (notification of notifications; track $index) {
    <mat-list-item>
      <div class="notification-item">
        @if (notification.sender?.avatar) {
        <img [src]="notification.sender?.avatar" alt="avatar" class="avatar" />
        } @else {
        <mat-icon class="icon">person</mat-icon>
        }

        <div class="notification-info">
          @if (notification.sender?.username) {
          <span class="message">
            <strong>{{ notification.sender?.username }}</strong>
            sent you a friend request
          </span>
          } @else {
          <span class="message">{{ notification.message }}</span>
          }

          <span class="timestamp">
            {{ notification.createdAt | date : "short" }}
          </span>
        </div>

        @if (notification.type === 'friend-request') {
        <button
          mat-button
          color="primary"
          (click)="acceptRequest(notification)"
        >
          Accept
        </button>
        <button mat-button class="warn" (click)="declineRequest(notification)">
          Decline
        </button>
        }
      </div>
    </mat-list-item>
    }
  </mat-list>
</mat-card>
